package main

import (
	"bytes"
	"crypto/tls"
	"encoding/json"
	"fmt"
	"io"
	"net/http"
)

var (
	server        = "console-api-stg.fptcloud.net"
	vpcId         = "4ef9197e-90a9-4ce4-8df0-bb172db0a720"
	bearerToken   = "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE3MjY3MjgwOTEuNzM2MDk0NSwic3ViIjp7ImlkIjoiZDc5YjEwOWUtZWE4MS00ZmE0LWI3NzEtNjZlZWU0ZWJjYjZkIiwiZW1haWwiOiJsb2NucDI1QGZwdC5jb20udm4iLCJqdGkiOiJhYTk0MWMxZi04Y2Q3LTQ1MjEtYjdjNC1iNjkxMDhhYTUzODUifSwiZXhwIjoxNzI2ODI2MDkxLjczNjA5NDV9.Sn817Nf8yEpykGAylHacibWJYjGWoNB0zx63mIpBfoE"
	serverType    = "ce0dafe3-7559-4998-9d75-3cffbd6383c4"
	scriptContent = `#!/bin/bash
mkdir -p /etc/cloud/cloud.cfg.d/
cat <<EOF > /etc/cloud/cloud.cfg.d/custom-networking.cfg
network:
config: disabled
EOF
chmod 0644 /etc/cloud/cloud.cfg.d/custom-networking.cfg


mkdir -p '/var/lib/cloud-config-downloader/credentials'
cat << EOF | base64 -d > '/var/lib/cloud-config-downloader/credentials/server'
aHR0cHM6Ly9hcGkuY2hlY2stZHBhYXMtdXZlZnZ6N28ueHBsYXQtdmRjLmludGVybmFsLnN0Zy5tLmZrZS5mcHRjbG91ZC5jb20=
EOF
chmod '0644' '/var/lib/cloud-config-downloader/credentials/server'

mkdir -p '/var/lib/cloud-config-downloader/credentials'
cat << EOF | base64 -d > '/var/lib/cloud-config-downloader/credentials/ca.crt'
LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1akNDQWM2Z0F3SUJBZ0lRTnVVZTI4c2tCYXM2SXE0OHdrTVZSREFOQmdrcWhraUc5dzBCQVFzRkFEQU4KTVFzd0NRWURWUVFERXdKallUQWVGdzB5TkRBNU1UQXdPRFEwTURCYUZ3MHpOREE1TVRBd09EUTBNREJhTUEweApDekFKQmdOVkJBTVRBbU5oTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF5MG02ClcvdjBxSG9wbDc2ZDhTNUVYd29ublBLRzNqZ3VyOTZHbGxxQmFEcDJpS3lsWktmYzA3NFhnZGZEdGZBNjVQeFoKKzM5Y3pSNFg0ZGNzUkhLbHpXTFd3YzhzSG5xSlc2aWIrS01wckM3WFI0b1BTT1pGSjhJa0w3TkdCeHkvU25TbwpMN2dyNXNxbFUzOUlCWUdGZU83SUpSeHB6ZWFVM29zaUZCSXUzSmx6czVyT2VHQVhOdXZPSW94TkFab2EzbmNKCm10d2djTUd1YUN4aVZiYzYwZThOOTlKRFRkNmZTb1dqOUR1TUo5Mm95dUVTYmo2WkdPVzl5SzNUTS9lZFJmUXgKMlUrbUkzdFdacnpmazFZQnd5bm9BTjMxNXlCS3BQUEduTi8vb0xEKzRYUllpWUw2ZHBsbVFhSHNiQmpDNjlhYQp1Z2xWUEs5YW13RE83UFNnWVFJREFRQUJvMEl3UURBT0JnTlZIUThCQWY4RUJBTUNBYVl3RHdZRFZSMFRBUUgvCkJBVXdBd0VCL3pBZEJnTlZIUTRFRmdRVWJTY1RrTHBic0tHRWphOFBOTnJpVEdvSjRFQXdEUVlKS29aSWh2Y04KQVFFTEJRQURnZ0VCQUxZb1hOMENCMXZ0TDdhVnBVMTdUK0prZmU1MEZ6dEJ1R1lzR1RuQWp5QlVkRDJYeFdpMQpiRTFmU3Jmem15OUVmRnorUnc4Z2RjNmJ6UjJPekJkZm5wK1FQZUQ4dXZjcWlneDIvVzFuYlBpVXV3eFc0dlRDCjVuMy9IdG52MzFCMWljQzhtZUhZV1MwektrcGVXUTBIVm1jSndjVk1iMi9oRXhaMEx5cTlEMjFzSUkyQmdjdFcKK0QrakhrWkxsNjRBSWdVNFBSclloRnc3eGMra2s0bUp2TER4MkNQU2JUMGxqZDZiYTNyYjVES2NMN2NFT3RLTwpiMzF6enR6K0V6andGMUo4VCsxcVJwR1R4THZSbUZqL2h6VzJjR0xvYlFYY2JoY2V5UStyMXhnNXdETFdNSE4vCkZaZVVnMEJrK1FQTnV5Mk4rSlBHczl1ZysrVVZmZkFTMEVrPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
EOF
chmod '0644' '/var/lib/cloud-config-downloader/credentials/ca.crt'

mkdir -p '/var/lib/cloud-config-downloader'
cat << EOF | base64 -d > '/var/lib/cloud-config-downloader/download-cloud-config.sh'
IyEvYmluL2Jhc2gKCnNldCAtbyBlcnJleGl0CnNldCAtbyBub3Vuc2V0CnNldCAtbyBwaXBlZmFpbAoKewpTRUNSRVRfTkFNRT0iY2xvdWQtY29uZmlnLXdvcmtlci1zcDA5cDlmci1mNzZiNiIKVE9LRU5fU0VDUkVUX05BTUU9ImNsb3VkLWNvbmZpZy1kb3dubG9hZGVyIgoKUEFUSF9DTE9VRENPTkZJR19ET1dOTE9BREVSX0NMSUVOVF9DRVJUPSIvdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlci9jcmVkZW50aWFscy9jbGllbnQuY3J0IgpQQVRIX0NMT1VEQ09ORklHX0RPV05MT0FERVJfQ0xJRU5UX0tFWT0iL3Zhci9saWIvY2xvdWQtY29uZmlnLWRvd25sb2FkZXIvY3JlZGVudGlhbHMvY2xpZW50LmtleSIKUEFUSF9DTE9VRENPTkZJR19ET1dOTE9BREVSX1RPS0VOPSIvdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlci9jcmVkZW50aWFscy90b2tlbiIKUEFUSF9CT09UU1RSQVBfVE9LRU49Ii92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzL2Jvb3RzdHJhcC10b2tlbiIKUEFUSF9FWEVDVVRPUl9TQ1JJUFQ9Ii92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2Rvd25sb2Fkcy9leGVjdXRlLWNsb3VkLWNvbmZpZy5zaCIKUEFUSF9FWEVDVVRPUl9TQ1JJUFRfQ0hFQ0tTVU09Ii92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2Rvd25sb2Fkcy9leGVjdXRlLWNsb3VkLWNvbmZpZy1jaGVja3N1bSIKCm1rZGlyIC1wICIvdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlci9kb3dubG9hZHMiCgpmdW5jdGlvbiByZWFkU2VjcmV0KCkgewogIHdnZXQgXAogICAgLXFPLSBcCiAgICAtLWNhLWNlcnRpZmljYXRlICIvdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlci9jcmVkZW50aWFscy9jYS5jcnQiIFwKICAgICIke0A6Mn0iICIkKGNhdCAiL3Zhci9saWIvY2xvdWQtY29uZmlnLWRvd25sb2FkZXIvY3JlZGVudGlhbHMvc2VydmVyIikvYXBpL3YxL25hbWVzcGFjZXMva3ViZS1zeXN0ZW0vc2VjcmV0cy8kMSIKfQoKZnVuY3Rpb24gcmVhZFNlY3JldEZ1bGwoKSB7CiAgcmVhZFNlY3JldCAiJDEiICItLWhlYWRlcj1BY2NlcHQ6IGFwcGxpY2F0aW9uL3lhbWwiICIke0A6Mn0iCn0KCmZ1bmN0aW9uIHJlYWRTZWNyZXRNZXRhKCkgewogIHJlYWRTZWNyZXQgIiQxIiAiLS1oZWFkZXI9QWNjZXB0OiBhcHBsaWNhdGlvbi95YW1sO2FzPVBhcnRpYWxPYmplY3RNZXRhZGF0YTtnPW1ldGEuazhzLmlvO3Y9djEsYXBwbGljYXRpb24veWFtbDthcz1QYXJ0aWFsT2JqZWN0TWV0YWRhdGE7Zz1tZXRhLms4cy5pbzt2PXYxIiAiJHtAOjJ9Igp9CgpmdW5jdGlvbiByZWFkU2VjcmV0TWV0YVdpdGhUb2tlbigpIHsKICByZWFkU2VjcmV0TWV0YSAiJDEiICItLWhlYWRlcj1BdXRob3JpemF0aW9uOiBCZWFyZXIgJDIiCn0KCmZ1bmN0aW9uIHJlYWRTZWNyZXRXaXRoVG9rZW4oKSB7CiAgcmVhZFNlY3JldEZ1bGwgIiQxIiAiLS1oZWFkZXI9QXV0aG9yaXphdGlvbjogQmVhcmVyICQyIgp9CgpmdW5jdGlvbiByZWFkU2VjcmV0V2l0aENsaWVudENlcnRpZmljYXRlKCkgewogIHJlYWRTZWNyZXRGdWxsICIkMSIgIi0tY2VydGlmaWNhdGU9JFBBVEhfQ0xPVURDT05GSUdfRE9XTkxPQURFUl9DTElFTlRfQ0VSVCIgIi0tcHJpdmF0ZS1rZXk9JFBBVEhfQ0xPVURDT05GSUdfRE9XTkxPQURFUl9DTElFTlRfS0VZIgp9CgpmdW5jdGlvbiBleHRyYWN0RGF0YUtleUZyb21TZWNyZXQoKSB7CiAgZWNobyAiJDEiIHwgc2VkIC1ybiAicy8gICQyOiAoLiopL1wxL3AiIHwgYmFzZTY0IC1kCn0KCmZ1bmN0aW9uIGV4dHJhY3RDaGVja3N1bUZyb21TZWNyZXQoKSB7CiAgZWNobyAiJDEiIHwgc2VkIC1ybiAncy8gICAgY2hlY2tzdW1cL2RhdGEtc2NyaXB0OiAoLiopL1wxL3AnIHwgc2VkIC1lICdzL14iLy8nIC1lICdzLyIkLy8nCn0KCmZ1bmN0aW9uIHdyaXRlVG9EaXNrU2FmZWx5KCkgewogIGxvY2FsIGRhdGE9IiQxIgogIGxvY2FsIGZpbGVfcGF0aD0iJDIiCgogIGlmIGVjaG8gIiRkYXRhIiA+ICIkZmlsZV9wYXRoLnRtcCIgJiYgKCBbWyAhIC1mICIkZmlsZV9wYXRoIiBdXSB8fCAhIGRpZmYgIiRmaWxlX3BhdGgiICIkZmlsZV9wYXRoLnRtcCI+L2Rldi9udWxsICk7IHRoZW4KICAgIG12ICIkZmlsZV9wYXRoLnRtcCIgIiRmaWxlX3BhdGgiCiAgZWxpZiBbWyAtZiAiJGZpbGVfcGF0aC50bXAiIF1dOyB0aGVuCiAgICBybSAtZiAiJGZpbGVfcGF0aC50bXAiCiAgZmkKfQoKIyBkb3dubG9hZCBzaG9vdCBhY2Nlc3MgdG9rZW4gZm9yIGNsb3VkLWNvbmZpZy1kb3dubG9hZGVyCmlmIFtbIC1mICIkUEFUSF9DTE9VRENPTkZJR19ET1dOTE9BREVSX1RPS0VOIiBdXTsgdGhlbgogIGlmICEgU0VDUkVUPSIkKHJlYWRTZWNyZXRXaXRoVG9rZW4gIiRUT0tFTl9TRUNSRVRfTkFNRSIgIiQoY2F0ICIkUEFUSF9DTE9VRENPTkZJR19ET1dOTE9BREVSX1RPS0VOIikiKSI7IHRoZW4KICAgIGVjaG8gIkNvdWxkIG5vdCByZXRyaWV2ZSB0aGUgc2hvb3QgYWNjZXNzIHNlY3JldCB3aXRoIG5hbWUgJFRPS0VOX1NFQ1JFVF9OQU1FIHdpdGggZXhpc3RpbmcgdG9rZW4iCiAgICBleGl0IDEKICBmaQplbHNlCiAgaWYgW1sgLWYgIiRQQVRIX0JPT1RTVFJBUF9UT0tFTiIgXV07IHRoZW4KICAgIGlmICEgU0VDUkVUPSIkKHJlYWRTZWNyZXRXaXRoVG9rZW4gIiRUT0tFTl9TRUNSRVRfTkFNRSIgIiQoY2F0ICIkUEFUSF9CT09UU1RSQVBfVE9LRU4iKSIpIjsgdGhlbgogICAgICBlY2hvICJDb3VsZCBub3QgcmV0cmlldmUgdGhlIHNob290IGFjY2VzcyBzZWNyZXQgd2l0aCBuYW1lICRUT0tFTl9TRUNSRVRfTkFNRSB3aXRoIGJvb3RzdHJhcCB0b2tlbiIKICAgICAgZXhpdCAxCiAgICBmaQogIGVsc2UKICAgIGlmICEgU0VDUkVUPSIkKHJlYWRTZWNyZXRXaXRoQ2xpZW50Q2VydGlmaWNhdGUgIiRUT0tFTl9TRUNSRVRfTkFNRSIpIjsgdGhlbgogICAgICBlY2hvICJDb3VsZCBub3QgcmV0cmlldmUgdGhlIHNob290IGFjY2VzcyBzZWNyZXQgd2l0aCBuYW1lICRUT0tFTl9TRUNSRVRfTkFNRSB3aXRoIGNsaWVudCBjZXJ0aWZpY2F0ZSIKICAgICAgZXhpdCAxCiAgICBmaQogIGZpCmZpCgpUT0tFTj0iJChleHRyYWN0RGF0YUtleUZyb21TZWNyZXQgIiRTRUNSRVQiICJ0b2tlbiIpIgppZiBbWyAteiAiJFRPS0VOIiBdXTsgdGhlbgogIGVjaG8gIlRva2VuIGluIHNob290IGFjY2VzcyBzZWNyZXQgJFRPS0VOX1NFQ1JFVF9OQU1FIGlzIGVtcHR5IgogIGV4aXQgMQpmaQp3cml0ZVRvRGlza1NhZmVseSAiJFRPS0VOIiAiJFBBVEhfQ0xPVURDT05GSUdfRE9XTkxPQURFUl9UT0tFTiIKCiMgZG93bmxvYWQgYW5kIHJ1biB0aGUgY2xvdWQgY29uZmlnIGV4ZWN1dGlvbiBzY3JpcHQKaWYgISBTRUNSRVRfTUVUQT0iJChyZWFkU2VjcmV0TWV0YVdpdGhUb2tlbiAiJFNFQ1JFVF9OQU1FIiAiJFRPS0VOIikiOyB0aGVuCiAgZWNobyAiQ291bGQgbm90IHJldHJpZXZlIHRoZSBtZXRhZGF0YSBpbiBzZWNyZXQgd2l0aCBuYW1lICRTRUNSRVRfTkFNRSIKICBleGl0IDEKZmkKTkVXX0NIRUNLU1VNPSIkKGV4dHJhY3RDaGVja3N1bUZyb21TZWNyZXQgIiRTRUNSRVRfTUVUQSIpIgoKT0xEX0NIRUNLU1VNPSI8bm9uZT4iCmlmIFtbIC1mICIkUEFUSF9FWEVDVVRPUl9TQ1JJUFRfQ0hFQ0tTVU0iIF1dOyB0aGVuCiAgT0xEX0NIRUNLU1VNPSIkKGNhdCAiJFBBVEhfRVhFQ1VUT1JfU0NSSVBUX0NIRUNLU1VNIikiCmZpCgppZiBbWyAiJE5FV19DSEVDS1NVTSIgIT0gIiRPTERfQ0hFQ0tTVU0iIF1dOyB0aGVuCiAgZWNobyAiQ2hlY2tzdW0gb2YgY2xvdWQgY29uZmlnIHNjcmlwdCBoYXMgY2hhbmdlZCBjb21wYXJlZCB0byB3aGF0IEkgaGFkIGRvd25sb2FkZWQgZWFybGllciAobmV3OiAkTkVXX0NIRUNLU1VNLCBvbGQ6ICRPTERfQ0hFQ0tTVU0pLiBGZXRjaGluZyBuZXcgc2NyaXB0Li4uIgoKICBpZiAhIFNFQ1JFVD0iJChyZWFkU2VjcmV0V2l0aFRva2VuICIkU0VDUkVUX05BTUUiICIkVE9LRU4iKSI7IHRoZW4KICAgIGVjaG8gIkNvdWxkIG5vdCByZXRyaWV2ZSB0aGUgY2xvdWQgY29uZmlnIHNjcmlwdCBpbiBzZWNyZXQgd2l0aCBuYW1lICRTRUNSRVRfTkFNRSIKICAgIGV4aXQgMQogIGZpCgogIFNDUklQVD0iJChleHRyYWN0RGF0YUtleUZyb21TZWNyZXQgIiRTRUNSRVQiICJzY3JpcHQiKSIKICBpZiBbWyAteiAiJFNDUklQVCIgXV07IHRoZW4KICAgIGVjaG8gIlNjcmlwdCBpbiBjbG91ZCBjb25maWcgc2VjcmV0ICRTRUNSRVQgaXMgZW1wdHkiCiAgICBleGl0IDEKICBmaQoKICB3cml0ZVRvRGlza1NhZmVseSAiJFNDUklQVCIgIiRQQVRIX0VYRUNVVE9SX1NDUklQVCIgJiYgY2htb2QgK3ggIiRQQVRIX0VYRUNVVE9SX1NDUklQVCIKICB3cml0ZVRvRGlza1NhZmVseSAiJChleHRyYWN0Q2hlY2tzdW1Gcm9tU2VjcmV0ICIkU0VDUkVUIikiICIkUEFUSF9FWEVDVVRPUl9TQ1JJUFRfQ0hFQ0tTVU0iCmZpCgoiJFBBVEhfRVhFQ1VUT1JfU0NSSVBUIgpleGl0ICQ/Cn0K
EOF
chmod '0744' '/var/lib/cloud-config-downloader/download-cloud-config.sh'

mkdir -p '/var/lib/cloud-config-downloader/credentials'
cat << EOF > '/var/lib/cloud-config-downloader/credentials/bootstrap-token'
6c7238.o3kvzscw95znbjfk
EOF
chmod '0644' '/var/lib/cloud-config-downloader/credentials/bootstrap-token'

cat << EOF | base64 -d > '/etc/systemd/system/cloud-config-downloader.service'
W1VuaXRdCkRlc2NyaXB0aW9uPURvd25sb2FkcyB0aGUgYWN0dWFsIGNsb3VkIGNvbmZpZyBmcm9tIHRoZSBTaG9vdCBBUEkgc2VydmVyIGFuZCBleGVjdXRlcyBpdApBZnRlcj1kb2NrZXIuc2VydmljZSBkb2NrZXIuc29ja2V0CldhbnRzPWRvY2tlci5zb2NrZXQKW1NlcnZpY2VdClJlc3RhcnQ9YWx3YXlzClJlc3RhcnRTZWM9MzAKUnVudGltZU1heFNlYz0xMjAwCkVudmlyb25tZW50RmlsZT0vZXRjL2Vudmlyb25tZW50CkV4ZWNTdGFydD0vdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlci9kb3dubG9hZC1jbG91ZC1jb25maWcuc2gKW0luc3RhbGxdCldhbnRlZEJ5PW11bHRpLXVzZXIudGFyZ2V0
EOF

until apt-get update -qq && apt-get install --no-upgrade -qqy containerd runc docker.io socat nfs-common logrotate jq policykit-1; do sleep 1; done
ln -s /usr/bin/docker /bin/docker
if [ ! -s /etc/containerd/config.toml ]; then
mkdir -p /etc/containerd/
containerd config default > /etc/containerd/config.toml
chmod 0644 /etc/containerd/config.toml
fi

mkdir -p /etc/systemd/system/containerd.service.d
cat <<EOF > /etc/systemd/system/containerd.service.d/11-exec_config.conf
[Service]
ExecStart=
ExecStart=/usr/bin/containerd --config=/etc/containerd/config.toml
EOF
chmod 0644 /etc/systemd/system/containerd.service.d/11-exec_config.conf

systemctl daemon-reload
systemctl enable containerd && systemctl restart containerd
systemctl enable docker && systemctl restart docker
systemctl enable cloud-config-downloader && systemctl restart cloud-config-downloader
rm -rf /root/.bash_history
history -c
`
)

type requestBodyCreate struct {
	RegionId   string   `json:"regionId,omitempty"`  // Region id (hanoi-vn)
	ClusterId  int32    `json:"clusterId,omitempty"` // Cluster id
	ServerType string   `json:"serverType"`          // Server type ID as uuid
	Names      []string `json:"names"`               // Define name of machines, it will be understanded as number of machines
	OS         string   `json:"os"`                  // OS type that machines will be installed (ubuntu/centos..)
	RaidType   string   `json:"raidType,omitempty"`  // Raid type that machine will be configured as a storage type (level-1) (Not using right now)
	SshKey     string   `json:"sshKey,omitempty"`    // sshKey that user already imported on portal, it must be an identify sshkey on portal
	UserData   string   `json:"userData,omitempty"`  // post user defines script after os installed
	Distro     string   `json:"distro,omitempty"`    // Json dump with keys name and hwe_kernel. Name as distro name, hwe_kernel as architecture
}

type sshkey struct {
	Id         string `json:"id"`         // ID of sshKey - required
	Name       string `json:"name"`       // Name of sshKey to display in portal - required (Default: fke-bm-sshKey)
	Public_key string `json:"public_key"` // PublicKey is imported to server
}

type distro struct {
	Name       string `json:"name"`       // Name of distro
	Hwe_kernel string `json:"hwe_kernel"` // architecture
}

type requestBodyPut struct { // Update a machine (Turn ON/OFF machine)
	Name  string `json:"name,omitempty"`  // Name of machine that will be update (Null means no modification)
	Power string `json:"power,omitempty"` // Power type of mechine that will be applied (Null means no modification) [ on, off, null ]
}
type responseBodyCreateAccepted struct { // Created accepted (202)
	Data  string `json:"data"`
	Error string `json:"message,omitempty"`
}

type responseBodyCreateError struct { // BadRequest (400) Unauthorized (401) InternalServerError (500) NotFound (404)
	// IsSuccess bool   `json:"isSuccess"`
	Error string `json:"message,omitempty"` // (optional) Reasons
}

type responseBodyList struct { // Update/Get/Delete a machine successfully  (200)  BadRequest (400) Unauthorized (401) InternalServerError (500) NotFound (404)
	Data      []serverDetail `json:"data"`
	Total     int            `json:"total"`
	IsSuccess bool           `json:"isSuccess"`
	Error     string         `json:"error,omitempty"` // (optional) Reasons
}

type responseBodyDetail struct {
	Data    serverDetail `json:"data"`
	Message string       `json:"message"`
	Code    int          `json:"err_code"`
}

type responseBodyDelete struct {
	Data    serverDetail `json:"data"`
	Message string       `json:"message"`
	Status  bool         `json:"status"`
}

type serverDetail struct {
	Id              string `json:"id"`              // Server's id
	Status          string `json:"status"`          // Server's status
	Created_at      string `json:"created_at"`      // Server's created time
	Updated_at      string `json:"updated_at"`      // Server's updated time
	Name            string `json:"name"`            // Name of server
	Vpc_id          string `json:"vpc_id"`          // Vpc id
	Hpc_pool_id     int    `json:"hpc_pool_id"`     // Hpc Pool id
	Pool_name       string `json:"pool_name"`       // pool name that server belong to
	Hpc_server_type string `json:"hpc_server_type"` // Server Type / Resource type
	Region          string `json:"region"`          // Server's region
	Os              string `json:"os"`              // Installed OS
	Subnet          string `json:"subnet"`
	Private_ip      string `json:"private_ip"` // Private IP address
	Public_ip       string `json:"public_ip"`  // Public IP address
	Meta_data       string `json:"meta_data"`  // Server meta data
}

func main() {
	// 	UserData := `#cloud-config
	// user: xplat
	// password: sondx
	// chpasswd: {expire: False}
	// ssh_pwauth: True
	// write_files:
	//   - path: /root/custom_network_config.sh
	//     permissions: '0755'
	//     encoding: b64
	//     content: IyEvYmluL2Jhc2gKbWtkaXIgLXAgL2V0Yy9jbG91ZC9jbG91ZC5jZmcuZC8KY2F0IDw8RU9GID4gL2V0Yy9jbG91ZC9jbG91ZC5jZmcuZC9jdXN0b20tbmV0d29ya2luZy5jZmcKbmV0d29yazoKICBjb25maWc6IGRpc2FibGVkCkVPRgpjaG1vZCAwNjQ0IC9ldGMvY2xvdWQvY2xvdWQuY2ZnLmQvY3VzdG9tLW5ldHdvcmtpbmcuY2ZnCgoKbWtkaXIgLXAgJy92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzJwpjYXQgPDwgRU9GIHwgYmFzZTY0IC1kID4gJy92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzL3NlcnZlcicKYUhSMGNITTZMeTloY0drdWRHaHBaVzR0WjNCMUxXdHZMWGh2WVMxaE0zazBhbVZzWnk1NGNHeGhkQzEyWkdNdWFXNTBaWEp1WVd3dWMzUm5MbTB1Wm10bExtWndkR05zYjNWa0xtTnZiUT09CkVPRgpjaG1vZCAnMDY0NCcgJy92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzL3NlcnZlcicKCm1rZGlyIC1wICcvdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlci9jcmVkZW50aWFscycKY2F0IDw8IEVPRiB8IGJhc2U2NCAtZCA+ICcvdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlci9jcmVkZW50aWFscy9jYS5jcnQnCkxTMHRMUzFDUlVkSlRpQkRSVkpVU1VaSlEwRlVSUzB0TFMwdENrMUpTVU0xYWtORFFXTTJaMEYzU1VKQlowbFJSVlJJT1ROaldVUnlVa00xYVZGcVdsRjNTMUZrYWtGT1FtZHJjV2hyYVVjNWR6QkNRVkZ6UmtGRVFVNEtUVkZ6ZDBOUldVUldVVkZFUlhkS2FsbFVRV1ZHZHpCNVRrUkJORTFVVFhkTmFsVjZUVlJLWVVaM01IcE9SRUUwVFZSTmQwMXFWWHBOVkVwaFRVRXdlQXBEZWtGS1FtZE9Wa0pCVFZSQmJVNW9UVWxKUWtscVFVNUNaMnR4YUd0cFJ6bDNNRUpCVVVWR1FVRlBRMEZST0VGTlNVbENRMmRMUTBGUlJVRjVRa3B4Q2pkbVIyeHVTa0k1YUZSR2NFZGphMWhsTW5rNFEzTldlRnB6V1ZSYVFtMTBTVTQ1U1ZsYVpteFpVbEppVUN0dldXcFNUa1o0WkZWd1VXMHhjQzk0S3lzS1pqSk9NbXBJVUVOSlFYcHdaVUoyVlhCcWVXZzVVbFpaV1dwcWNURjJhVkZIYm1kNFFYSTJSamRpVlVOdlpVWlpUVEZ0U0RaT04weHBZbEF2VUdWTVJRcHFhbkJDUWpWQ1NHUTVOak5FUTFkWVRVUlJTRTlaU0U1cFpqaHFOUzlJTDJaV2VWZFZZMGxXUWpBdmFYRjZMMXB4ZUhRek5sQlRRbnBoVTNoT1oyazRDbkYxUlc1d1VYVkNNbUpGZHk5NlNFbFhMMHhTY0RNM1RGUm1VR1YyTjBKbWQzWkVkbUZDTWtacWIxRlNiMVE1U2tsRlkyZHhXRWxLWkdSbVZUaFpZVElLZEZrMmFYRk9UVGhCWmsxQmNFUm5jR3RNV1hOeVEwcHFVelpqWkdGeEswTklWVEZTYlRORVUzUlVibWR1TkhCWFkyZFRLMGRLVUc1S2J5czBkWEJQUkFvNVowdzFWa1V4V0VGSmIzVlRUVUoxU1ZGSlJFRlJRVUp2TUVsM1VVUkJUMEpuVGxaSVVUaENRV1k0UlVKQlRVTkJZVmwzUkhkWlJGWlNNRlJCVVVndkNrSkJWWGRCZDBWQ0wzcEJaRUpuVGxaSVVUUkZSbWRSVldZeU0xcEVTalZHUmtkdFpVSXlUbWcwT1dkREwwUXZaWG94UVhkRVVWbEtTMjlhU1doMlkwNEtRVkZGVEVKUlFVUm5aMFZDUVVGVFVrNDVaMVZxTjJScFpXbHZaM1k1U2xJNVRrOVpkVUZHWW0xNlVXZHhlSE0zVWxnMlRFb3phR0V6T0c1SWR6aEdhUW92T0hCdE9FMVBTazl4TlM5NWRuQnlUR0pWYjBVM1ZuSk5PR3hEV1c5TVNEaHBZblF3UjJwTk1UaHpTVk5PYldJNWMxUndVekZRYlVWRVluZElTMEpQQ214cWFGQnFhVk51YjBoWFpHRlhTVUl5Um10bmFIVnRkSGNyVlhJMEx5OTRiMlowTTNWSGVscFdaM0pPUjA5NlQxWnZTbEJQWlVZcldVRlBZbGxVYWtzS1kzSlFVMGhqY1hsQ2VqTnNlbTVNZG14blpGWTFOa2gxTWpOekszVlFhMlYyU2xsblVFUnJNbmhUV1VoYU15OUhiV3N5UXpGSFRGRjFWV053UnpaRU9BcERVVzVvTlRSUFNYVjFaMVJtZFRObVVrZEZlamhJVVdsVmRsbHpTRVZqYWpCSE1rSktjV0pPUkZKMmR6bHVLek5qYURaSmJITkpRbmw0ZEd3M1VIRlBDaTlPVWtsWWJXaHhNbmxQWmpnNGNGTjZSbWt3UVdOQ1VsUjZlSE41TjNwVWFGVkZQUW90TFMwdExVVk9SQ0JEUlZKVVNVWkpRMEZVUlMwdExTMHRDZz09CkVPRgpjaG1vZCAnMDY0NCcgJy92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzL2NhLmNydCcKCm1rZGlyIC1wICcvdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlcicKY2F0IDw8IEVPRiB8IGJhc2U2NCAtZCA+ICcvdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlci9kb3dubG9hZC1jbG91ZC1jb25maWcuc2gnCkl5RXZZbWx1TDJKaGMyZ0tDbk5sZENBdGJ5QmxjbkpsZUdsMENuTmxkQ0F0YnlCdWIzVnVjMlYwQ25ObGRDQXRieUJ3YVhCbFptRnBiQW9LZXdwVFJVTlNSVlJmVGtGTlJUMGlZMnh2ZFdRdFkyOXVabWxuTFhkdmNtdGxjaTExYlc5a1pqUjRhaTFtTnpaaU5pSUtWRTlMUlU1ZlUwVkRVa1ZVWDA1QlRVVTlJbU5zYjNWa0xXTnZibVpwWnkxa2IzZHViRzloWkdWeUlnb0tVRUZVU0Y5RFRFOVZSRU5QVGtaSlIxOUVUMWRPVEU5QlJFVlNYME5NU1VWT1ZGOURSVkpVUFNJdmRtRnlMMnhwWWk5amJHOTFaQzFqYjI1bWFXY3RaRzkzYm14dllXUmxjaTlqY21Wa1pXNTBhV0ZzY3k5amJHbGxiblF1WTNKMElncFFRVlJJWDBOTVQxVkVRMDlPUmtsSFgwUlBWMDVNVDBGRVJWSmZRMHhKUlU1VVgwdEZXVDBpTDNaaGNpOXNhV0l2WTJ4dmRXUXRZMjl1Wm1sbkxXUnZkMjVzYjJGa1pYSXZZM0psWkdWdWRHbGhiSE12WTJ4cFpXNTBMbXRsZVNJS1VFRlVTRjlEVEU5VlJFTlBUa1pKUjE5RVQxZE9URTlCUkVWU1gxUlBTMFZPUFNJdmRtRnlMMnhwWWk5amJHOTFaQzFqYjI1bWFXY3RaRzkzYm14dllXUmxjaTlqY21Wa1pXNTBhV0ZzY3k5MGIydGxiaUlLVUVGVVNGOUNUMDlVVTFSU1FWQmZWRTlMUlU0OUlpOTJZWEl2YkdsaUwyTnNiM1ZrTFdOdmJtWnBaeTFrYjNkdWJHOWhaR1Z5TDJOeVpXUmxiblJwWVd4ekwySnZiM1J6ZEhKaGNDMTBiMnRsYmlJS1VFRlVTRjlGV0VWRFZWUlBVbDlUUTFKSlVGUTlJaTkyWVhJdmJHbGlMMk5zYjNWa0xXTnZibVpwWnkxa2IzZHViRzloWkdWeUwyUnZkMjVzYjJGa2N5OWxlR1ZqZFhSbExXTnNiM1ZrTFdOdmJtWnBaeTV6YUNJS1VFRlVTRjlGV0VWRFZWUlBVbDlUUTFKSlVGUmZRMGhGUTB0VFZVMDlJaTkyWVhJdmJHbGlMMk5zYjNWa0xXTnZibVpwWnkxa2IzZHViRzloWkdWeUwyUnZkMjVzYjJGa2N5OWxlR1ZqZFhSbExXTnNiM1ZrTFdOdmJtWnBaeTFqYUdWamEzTjFiU0lLQ20xclpHbHlJQzF3SUNJdmRtRnlMMnhwWWk5amJHOTFaQzFqYjI1bWFXY3RaRzkzYm14dllXUmxjaTlrYjNkdWJHOWhaSE1pQ2dwbWRXNWpkR2x2YmlCeVpXRmtVMlZqY21WMEtDa2dld29nSUhkblpYUWdYQW9nSUNBZ0xYRlBMU0JjQ2lBZ0lDQXRMV05oTFdObGNuUnBabWxqWVhSbElDSXZkbUZ5TDJ4cFlpOWpiRzkxWkMxamIyNW1hV2N0Wkc5M2JteHZZV1JsY2k5amNtVmtaVzUwYVdGc2N5OWpZUzVqY25RaUlGd0tJQ0FnSUNJa2UwQTZNbjBpSUNJa0tHTmhkQ0FpTDNaaGNpOXNhV0l2WTJ4dmRXUXRZMjl1Wm1sbkxXUnZkMjVzYjJGa1pYSXZZM0psWkdWdWRHbGhiSE12YzJWeWRtVnlJaWt2WVhCcEwzWXhMMjVoYldWemNHRmpaWE12YTNWaVpTMXplWE4wWlcwdmMyVmpjbVYwY3k4a01TSUtmUW9LWm5WdVkzUnBiMjRnY21WaFpGTmxZM0psZEVaMWJHd29LU0I3Q2lBZ2NtVmhaRk5sWTNKbGRDQWlKREVpSUNJdExXaGxZV1JsY2oxQlkyTmxjSFE2SUdGd2NHeHBZMkYwYVc5dUwzbGhiV3dpSUNJa2UwQTZNbjBpQ24wS0NtWjFibU4wYVc5dUlISmxZV1JUWldOeVpYUk5aWFJoS0NrZ2V3b2dJSEpsWVdSVFpXTnlaWFFnSWlReElpQWlMUzFvWldGa1pYSTlRV05qWlhCME9pQmhjSEJzYVdOaGRHbHZiaTk1WVcxc08yRnpQVkJoY25ScFlXeFBZbXBsWTNSTlpYUmhaR0YwWVR0blBXMWxkR0V1YXpoekxtbHZPM1k5ZGpFc1lYQndiR2xqWVhScGIyNHZlV0Z0YkR0aGN6MVFZWEowYVdGc1QySnFaV04wVFdWMFlXUmhkR0U3WnoxdFpYUmhMbXM0Y3k1cGJ6dDJQWFl4SWlBaUpIdEFPako5SWdwOUNncG1kVzVqZEdsdmJpQnlaV0ZrVTJWamNtVjBUV1YwWVZkcGRHaFViMnRsYmlncElIc0tJQ0J5WldGa1UyVmpjbVYwVFdWMFlTQWlKREVpSUNJdExXaGxZV1JsY2oxQmRYUm9iM0pwZW1GMGFXOXVPaUJDWldGeVpYSWdKRElpQ24wS0NtWjFibU4wYVc5dUlISmxZV1JUWldOeVpYUlhhWFJvVkc5clpXNG9LU0I3Q2lBZ2NtVmhaRk5sWTNKbGRFWjFiR3dnSWlReElpQWlMUzFvWldGa1pYSTlRWFYwYUc5eWFYcGhkR2x2YmpvZ1FtVmhjbVZ5SUNReUlncDlDZ3BtZFc1amRHbHZiaUJ5WldGa1UyVmpjbVYwVjJsMGFFTnNhV1Z1ZEVObGNuUnBabWxqWVhSbEtDa2dld29nSUhKbFlXUlRaV055WlhSR2RXeHNJQ0lrTVNJZ0lpMHRZMlZ5ZEdsbWFXTmhkR1U5SkZCQlZFaGZRMHhQVlVSRFQwNUdTVWRmUkU5WFRreFBRVVJGVWw5RFRFbEZUbFJmUTBWU1ZDSWdJaTB0Y0hKcGRtRjBaUzFyWlhrOUpGQkJWRWhmUTB4UFZVUkRUMDVHU1VkZlJFOVhUa3hQUVVSRlVsOURURWxGVGxSZlMwVlpJZ3A5Q2dwbWRXNWpkR2x2YmlCbGVIUnlZV04wUkdGMFlVdGxlVVp5YjIxVFpXTnlaWFFvS1NCN0NpQWdaV05vYnlBaUpERWlJSHdnYzJWa0lDMXliaUFpY3k4Z0lDUXlPaUFvTGlvcEwxd3hMM0FpSUh3Z1ltRnpaVFkwSUMxa0NuMEtDbVoxYm1OMGFXOXVJR1Y0ZEhKaFkzUkRhR1ZqYTNOMWJVWnliMjFUWldOeVpYUW9LU0I3Q2lBZ1pXTm9ieUFpSkRFaUlId2djMlZrSUMxeWJpQW5jeThnSUNBZ1kyaGxZMnR6ZFcxY0wyUmhkR0V0YzJOeWFYQjBPaUFvTGlvcEwxd3hMM0FuSUh3Z2MyVmtJQzFsSUNkekwxNGlMeThuSUMxbElDZHpMeUlrTHk4bkNuMEtDbVoxYm1OMGFXOXVJSGR5YVhSbFZHOUVhWE5yVTJGbVpXeDVLQ2tnZXdvZ0lHeHZZMkZzSUdSaGRHRTlJaVF4SWdvZ0lHeHZZMkZzSUdacGJHVmZjR0YwYUQwaUpESWlDZ29nSUdsbUlHVmphRzhnSWlSa1lYUmhJaUErSUNJa1ptbHNaVjl3WVhSb0xuUnRjQ0lnSmlZZ0tDQmJXeUFoSUMxbUlDSWtabWxzWlY5d1lYUm9JaUJkWFNCOGZDQWhJR1JwWm1ZZ0lpUm1hV3hsWDNCaGRHZ2lJQ0lrWm1sc1pWOXdZWFJvTG5SdGNDSStMMlJsZGk5dWRXeHNJQ2s3SUhSb1pXNEtJQ0FnSUcxMklDSWtabWxzWlY5d1lYUm9MblJ0Y0NJZ0lpUm1hV3hsWDNCaGRHZ2lDaUFnWld4cFppQmJXeUF0WmlBaUpHWnBiR1ZmY0dGMGFDNTBiWEFpSUYxZE95QjBhR1Z1Q2lBZ0lDQnliU0F0WmlBaUpHWnBiR1ZmY0dGMGFDNTBiWEFpQ2lBZ1pta0tmUW9LSXlCa2IzZHViRzloWkNCemFHOXZkQ0JoWTJObGMzTWdkRzlyWlc0Z1ptOXlJR05zYjNWa0xXTnZibVpwWnkxa2IzZHViRzloWkdWeUNtbG1JRnRiSUMxbUlDSWtVRUZVU0Y5RFRFOVZSRU5QVGtaSlIxOUVUMWRPVEU5QlJFVlNYMVJQUzBWT0lpQmRYVHNnZEdobGJnb2dJR2xtSUNFZ1UwVkRVa1ZVUFNJa0tISmxZV1JUWldOeVpYUlhhWFJvVkc5clpXNGdJaVJVVDB0RlRsOVRSVU5TUlZSZlRrRk5SU0lnSWlRb1kyRjBJQ0lrVUVGVVNGOURURTlWUkVOUFRrWkpSMTlFVDFkT1RFOUJSRVZTWDFSUFMwVk9JaWtpS1NJN0lIUm9aVzRLSUNBZ0lHVmphRzhnSWtOdmRXeGtJRzV2ZENCeVpYUnlhV1YyWlNCMGFHVWdjMmh2YjNRZ1lXTmpaWE56SUhObFkzSmxkQ0IzYVhSb0lHNWhiV1VnSkZSUFMwVk9YMU5GUTFKRlZGOU9RVTFGSUhkcGRHZ2daWGhwYzNScGJtY2dkRzlyWlc0aUNpQWdJQ0JsZUdsMElERUtJQ0JtYVFwbGJITmxDaUFnYVdZZ1cxc2dMV1lnSWlSUVFWUklYMEpQVDFSVFZGSkJVRjlVVDB0RlRpSWdYVjA3SUhSb1pXNEtJQ0FnSUdsbUlDRWdVMFZEVWtWVVBTSWtLSEpsWVdSVFpXTnlaWFJYYVhSb1ZHOXJaVzRnSWlSVVQwdEZUbDlUUlVOU1JWUmZUa0ZOUlNJZ0lpUW9ZMkYwSUNJa1VFRlVTRjlDVDA5VVUxUlNRVkJmVkU5TFJVNGlLU0lwSWpzZ2RHaGxiZ29nSUNBZ0lDQmxZMmh2SUNKRGIzVnNaQ0J1YjNRZ2NtVjBjbWxsZG1VZ2RHaGxJSE5vYjI5MElHRmpZMlZ6Y3lCelpXTnlaWFFnZDJsMGFDQnVZVzFsSUNSVVQwdEZUbDlUUlVOU1JWUmZUa0ZOUlNCM2FYUm9JR0p2YjNSemRISmhjQ0IwYjJ0bGJpSUtJQ0FnSUNBZ1pYaHBkQ0F4Q2lBZ0lDQm1hUW9nSUdWc2MyVUtJQ0FnSUdsbUlDRWdVMFZEVWtWVVBTSWtLSEpsWVdSVFpXTnlaWFJYYVhSb1EyeHBaVzUwUTJWeWRHbG1hV05oZEdVZ0lpUlVUMHRGVGw5VFJVTlNSVlJmVGtGTlJTSXBJanNnZEdobGJnb2dJQ0FnSUNCbFkyaHZJQ0pEYjNWc1pDQnViM1FnY21WMGNtbGxkbVVnZEdobElITm9iMjkwSUdGalkyVnpjeUJ6WldOeVpYUWdkMmwwYUNCdVlXMWxJQ1JVVDB0RlRsOVRSVU5TUlZSZlRrRk5SU0IzYVhSb0lHTnNhV1Z1ZENCalpYSjBhV1pwWTJGMFpTSUtJQ0FnSUNBZ1pYaHBkQ0F4Q2lBZ0lDQm1hUW9nSUdacENtWnBDZ3BVVDB0RlRqMGlKQ2hsZUhSeVlXTjBSR0YwWVV0bGVVWnliMjFUWldOeVpYUWdJaVJUUlVOU1JWUWlJQ0owYjJ0bGJpSXBJZ3BwWmlCYld5QXRlaUFpSkZSUFMwVk9JaUJkWFRzZ2RHaGxiZ29nSUdWamFHOGdJbFJ2YTJWdUlHbHVJSE5vYjI5MElHRmpZMlZ6Y3lCelpXTnlaWFFnSkZSUFMwVk9YMU5GUTFKRlZGOU9RVTFGSUdseklHVnRjSFI1SWdvZ0lHVjRhWFFnTVFwbWFRcDNjbWwwWlZSdlJHbHphMU5oWm1Wc2VTQWlKRlJQUzBWT0lpQWlKRkJCVkVoZlEweFBWVVJEVDA1R1NVZGZSRTlYVGt4UFFVUkZVbDlVVDB0RlRpSUtDaU1nWkc5M2JteHZZV1FnWVc1a0lISjFiaUIwYUdVZ1kyeHZkV1FnWTI5dVptbG5JR1Y0WldOMWRHbHZiaUJ6WTNKcGNIUUthV1lnSVNCVFJVTlNSVlJmVFVWVVFUMGlKQ2h5WldGa1UyVmpjbVYwVFdWMFlWZHBkR2hVYjJ0bGJpQWlKRk5GUTFKRlZGOU9RVTFGSWlBaUpGUlBTMFZPSWlraU95QjBhR1Z1Q2lBZ1pXTm9ieUFpUTI5MWJHUWdibTkwSUhKbGRISnBaWFpsSUhSb1pTQnRaWFJoWkdGMFlTQnBiaUJ6WldOeVpYUWdkMmwwYUNCdVlXMWxJQ1JUUlVOU1JWUmZUa0ZOUlNJS0lDQmxlR2wwSURFS1pta0tUa1ZYWDBOSVJVTkxVMVZOUFNJa0tHVjRkSEpoWTNSRGFHVmphM04xYlVaeWIyMVRaV055WlhRZ0lpUlRSVU5TUlZSZlRVVlVRU0lwSWdvS1QweEVYME5JUlVOTFUxVk5QU0k4Ym05dVpUNGlDbWxtSUZ0YklDMW1JQ0lrVUVGVVNGOUZXRVZEVlZSUFVsOVRRMUpKVUZSZlEwaEZRMHRUVlUwaUlGMWRPeUIwYUdWdUNpQWdUMHhFWDBOSVJVTkxVMVZOUFNJa0tHTmhkQ0FpSkZCQlZFaGZSVmhGUTFWVVQxSmZVME5TU1ZCVVgwTklSVU5MVTFWTklpa2lDbVpwQ2dwcFppQmJXeUFpSkU1RlYxOURTRVZEUzFOVlRTSWdJVDBnSWlSUFRFUmZRMGhGUTB0VFZVMGlJRjFkT3lCMGFHVnVDaUFnWldOb2J5QWlRMmhsWTJ0emRXMGdiMllnWTJ4dmRXUWdZMjl1Wm1sbklITmpjbWx3ZENCb1lYTWdZMmhoYm1kbFpDQmpiMjF3WVhKbFpDQjBieUIzYUdGMElFa2dhR0ZrSUdSdmQyNXNiMkZrWldRZ1pXRnliR2xsY2lBb2JtVjNPaUFrVGtWWFgwTklSVU5MVTFWTkxDQnZiR1E2SUNSUFRFUmZRMGhGUTB0VFZVMHBMaUJHWlhSamFHbHVaeUJ1WlhjZ2MyTnlhWEIwTGk0dUlnb0tJQ0JwWmlBaElGTkZRMUpGVkQwaUpDaHlaV0ZrVTJWamNtVjBWMmwwYUZSdmEyVnVJQ0lrVTBWRFVrVlVYMDVCVFVVaUlDSWtWRTlMUlU0aUtTSTdJSFJvWlc0S0lDQWdJR1ZqYUc4Z0lrTnZkV3hrSUc1dmRDQnlaWFJ5YVdWMlpTQjBhR1VnWTJ4dmRXUWdZMjl1Wm1sbklITmpjbWx3ZENCcGJpQnpaV055WlhRZ2QybDBhQ0J1WVcxbElDUlRSVU5TUlZSZlRrRk5SU0lLSUNBZ0lHVjRhWFFnTVFvZ0lHWnBDZ29nSUZORFVrbFFWRDBpSkNobGVIUnlZV04wUkdGMFlVdGxlVVp5YjIxVFpXTnlaWFFnSWlSVFJVTlNSVlFpSUNKelkzSnBjSFFpS1NJS0lDQnBaaUJiV3lBdGVpQWlKRk5EVWtsUVZDSWdYVjA3SUhSb1pXNEtJQ0FnSUdWamFHOGdJbE5qY21sd2RDQnBiaUJqYkc5MVpDQmpiMjVtYVdjZ2MyVmpjbVYwSUNSVFJVTlNSVlFnYVhNZ1pXMXdkSGtpQ2lBZ0lDQmxlR2wwSURFS0lDQm1hUW9LSUNCM2NtbDBaVlJ2UkdsemExTmhabVZzZVNBaUpGTkRVa2xRVkNJZ0lpUlFRVlJJWDBWWVJVTlZWRTlTWDFORFVrbFFWQ0lnSmlZZ1kyaHRiMlFnSzNnZ0lpUlFRVlJJWDBWWVJVTlZWRTlTWDFORFVrbFFWQ0lLSUNCM2NtbDBaVlJ2UkdsemExTmhabVZzZVNBaUpDaGxlSFJ5WVdOMFEyaGxZMnR6ZFcxR2NtOXRVMlZqY21WMElDSWtVMFZEVWtWVUlpa2lJQ0lrVUVGVVNGOUZXRVZEVlZSUFVsOVRRMUpKVUZSZlEwaEZRMHRUVlUwaUNtWnBDZ29pSkZCQlZFaGZSVmhGUTFWVVQxSmZVME5TU1ZCVUlncGxlR2wwSUNRL0NuMEsKRU9GCmNobW9kICcwNzQ0JyAnL3Zhci9saWIvY2xvdWQtY29uZmlnLWRvd25sb2FkZXIvZG93bmxvYWQtY2xvdWQtY29uZmlnLnNoJwoKbWtkaXIgLXAgJy92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzJwpjYXQgPDwgRU9GID4gJy92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzL2Jvb3RzdHJhcC10b2tlbicKNzg2NDM5LjFkejd3NXQ3Y3Jib3Q3amQKRU9GCmNobW9kICcwNjQ0JyAnL3Zhci9saWIvY2xvdWQtY29uZmlnLWRvd25sb2FkZXIvY3JlZGVudGlhbHMvYm9vdHN0cmFwLXRva2VuJwoKCgpjYXQgPDwgRU9GIHwgYmFzZTY0IC1kID4gJy9ldGMvc3lzdGVtZC9zeXN0ZW0vY2xvdWQtY29uZmlnLWRvd25sb2FkZXIuc2VydmljZScKVzFWdWFYUmRDa1JsYzJOeWFYQjBhVzl1UFVSdmQyNXNiMkZrY3lCMGFHVWdZV04wZFdGc0lHTnNiM1ZrSUdOdmJtWnBaeUJtY205dElIUm9aU0JUYUc5dmRDQkJVRWtnYzJWeWRtVnlJR0Z1WkNCbGVHVmpkWFJsY3lCcGRBcEJablJsY2oxa2IyTnJaWEl1YzJWeWRtbGpaU0JrYjJOclpYSXVjMjlqYTJWMENsZGhiblJ6UFdSdlkydGxjaTV6YjJOclpYUUtXMU5sY25acFkyVmRDbEpsYzNSaGNuUTlZV3gzWVhsekNsSmxjM1JoY25SVFpXTTlNekFLVW5WdWRHbHRaVTFoZUZObFl6MHhNakF3Q2tWdWRtbHliMjV0Wlc1MFJtbHNaVDB2WlhSakwyVnVkbWx5YjI1dFpXNTBDa1Y0WldOVGRHRnlkRDB2ZG1GeUwyeHBZaTlqYkc5MVpDMWpiMjVtYVdjdFpHOTNibXh2WVdSbGNpOWtiM2R1Ykc5aFpDMWpiRzkxWkMxamIyNW1hV2N1YzJnS1cwbHVjM1JoYkd4ZENsZGhiblJsWkVKNVBXMTFiSFJwTFhWelpYSXVkR0Z5WjJWMApFT0YKCnVudGlsIGFwdC1nZXQgdXBkYXRlIC1xcSAmJiBhcHQtZ2V0IGluc3RhbGwgLS1uby11cGdyYWRlIC1xcXkgY29udGFpbmVyZCBydW5jIGRvY2tlci5pbyBzb2NhdCBuZnMtY29tbW9uIGxvZ3JvdGF0ZSBqcSBwb2xpY3lraXQtMTsgZG8gc2xlZXAgMTsgZG9uZQpsbiAtcyAvdXNyL2Jpbi9kb2NrZXIgL2Jpbi9kb2NrZXIKaWYgWyAhIC1zIC9ldGMvY29udGFpbmVyZC9jb25maWcudG9tbCBdOyB0aGVuCiAgbWtkaXIgLXAgL2V0Yy9jb250YWluZXJkLwogIGNvbnRhaW5lcmQgY29uZmlnIGRlZmF1bHQgPiAvZXRjL2NvbnRhaW5lcmQvY29uZmlnLnRvbWwKICBjaG1vZCAwNjQ0IC9ldGMvY29udGFpbmVyZC9jb25maWcudG9tbApmaQoKbWtkaXIgLXAgL2V0Yy9zeXN0ZW1kL3N5c3RlbS9jb250YWluZXJkLnNlcnZpY2UuZApjYXQgPDxFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL2NvbnRhaW5lcmQuc2VydmljZS5kLzExLWV4ZWNfY29uZmlnLmNvbmYKW1NlcnZpY2VdCkV4ZWNTdGFydD0KRXhlY1N0YXJ0PS91c3IvYmluL2NvbnRhaW5lcmQgLS1jb25maWc9L2V0Yy9jb250YWluZXJkL2NvbmZpZy50b21sCkVPRgpjaG1vZCAwNjQ0IC9ldGMvc3lzdGVtZC9zeXN0ZW0vY29udGFpbmVyZC5zZXJ2aWNlLmQvMTEtZXhlY19jb25maWcuY29uZgoKc3lzdGVtY3RsIGRhZW1vbi1yZWxvYWQKc3lzdGVtY3RsIGVuYWJsZSBjb250YWluZXJkICYmIHN5c3RlbWN0bCByZXN0YXJ0IGNvbnRhaW5lcmQKc3lzdGVtY3RsIGVuYWJsZSBkb2NrZXIgJiYgc3lzdGVtY3RsIHJlc3RhcnQgZG9ja2VyCnN5c3RlbWN0bCBlbmFibGUgY2xvdWQtY29uZmlnLWRvd25sb2FkZXIgJiYgc3lzdGVtY3RsIHJlc3RhcnQgY2xvdWQtY29uZmlnLWRvd25sb2FkZXIKcm0gLXJmIC9yb290Ly5iYXNoX2hpc3RvcnkKaGlzdG9yeSAtYw==
	// runcmd:
	//   - sed -i "s|^"/swapfile"|#&|"
	//   - sudo swapoff -a
	//   - hostnamectl set-hostname fke-sondx12-ncp
	//   - systemctl restart systemd-hostnamed.service
	//   - /bin/bash /root/custom_network_config.sh`
	// 	fmt.Printf(UserData)
	machineName := "sondx12-machine-sdsdsdsd"
	secret := "IyEvYmluL2Jhc2gKbWtkaXIgLXAgL2V0Yy9jbG91ZC9jbG91ZC5jZmcuZC8KY2F0IDw8RU9GID4gL2V0Yy9jbG91ZC9jbG91ZC5jZmcuZC9jdXN0b20tbmV0d29ya2luZy5jZmcKbmV0d29yazoKICBjb25maWc6IGRpc2FibGVkCkVPRgpjaG1vZCAwNjQ0IC9ldGMvY2xvdWQvY2xvdWQuY2ZnLmQvY3VzdG9tLW5ldHdvcmtpbmcuY2ZnCgoKbWtkaXIgLXAgJy92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzJwpjYXQgPDwgRU9GIHwgYmFzZTY0IC1kID4gJy92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzL3NlcnZlcicKYUhSMGNITTZMeTloY0drdWRHaHBaVzR0WjNCMUxXdHZMWGh2WVMxaE0zazBhbVZzWnk1NGNHeGhkQzEyWkdNdWFXNTBaWEp1WVd3dWMzUm5MbTB1Wm10bExtWndkR05zYjNWa0xtTnZiUT09CkVPRgpjaG1vZCAnMDY0NCcgJy92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzL3NlcnZlcicKCm1rZGlyIC1wICcvdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlci9jcmVkZW50aWFscycKY2F0IDw8IEVPRiB8IGJhc2U2NCAtZCA+ICcvdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlci9jcmVkZW50aWFscy9jYS5jcnQnCkxTMHRMUzFDUlVkSlRpQkRSVkpVU1VaSlEwRlVSUzB0TFMwdENrMUpTVU0xYWtORFFXTTJaMEYzU1VKQlowbFJSVlJJT1ROaldVUnlVa00xYVZGcVdsRjNTMUZrYWtGT1FtZHJjV2hyYVVjNWR6QkNRVkZ6UmtGRVFVNEtUVkZ6ZDBOUldVUldVVkZFUlhkS2FsbFVRV1ZHZHpCNVRrUkJORTFVVFhkTmFsVjZUVlJLWVVaM01IcE9SRUUwVFZSTmQwMXFWWHBOVkVwaFRVRXdlQXBEZWtGS1FtZE9Wa0pCVFZSQmJVNW9UVWxKUWtscVFVNUNaMnR4YUd0cFJ6bDNNRUpCVVVWR1FVRlBRMEZST0VGTlNVbENRMmRMUTBGUlJVRjVRa3B4Q2pkbVIyeHVTa0k1YUZSR2NFZGphMWhsTW5rNFEzTldlRnB6V1ZSYVFtMTBTVTQ1U1ZsYVpteFpVbEppVUN0dldXcFNUa1o0WkZWd1VXMHhjQzk0S3lzS1pqSk9NbXBJVUVOSlFYcHdaVUoyVlhCcWVXZzVVbFpaV1dwcWNURjJhVkZIYm1kNFFYSTJSamRpVlVOdlpVWlpUVEZ0U0RaT04weHBZbEF2VUdWTVJRcHFhbkJDUWpWQ1NHUTVOak5FUTFkWVRVUlJTRTlaU0U1cFpqaHFOUzlJTDJaV2VWZFZZMGxXUWpBdmFYRjZMMXB4ZUhRek5sQlRRbnBoVTNoT1oyazRDbkYxUlc1d1VYVkNNbUpGZHk5NlNFbFhMMHhTY0RNM1RGUm1VR1YyTjBKbWQzWkVkbUZDTWtacWIxRlNiMVE1U2tsRlkyZHhXRWxLWkdSbVZUaFpZVElLZEZrMmFYRk9UVGhCWmsxQmNFUm5jR3RNV1hOeVEwcHFVelpqWkdGeEswTklWVEZTYlRORVUzUlVibWR1TkhCWFkyZFRLMGRLVUc1S2J5czBkWEJQUkFvNVowdzFWa1V4V0VGSmIzVlRUVUoxU1ZGSlJFRlJRVUp2TUVsM1VVUkJUMEpuVGxaSVVUaENRV1k0UlVKQlRVTkJZVmwzUkhkWlJGWlNNRlJCVVVndkNrSkJWWGRCZDBWQ0wzcEJaRUpuVGxaSVVUUkZSbWRSVldZeU0xcEVTalZHUmtkdFpVSXlUbWcwT1dkREwwUXZaWG94UVhkRVVWbEtTMjlhU1doMlkwNEtRVkZGVEVKUlFVUm5aMFZDUVVGVFVrNDVaMVZxTjJScFpXbHZaM1k1U2xJNVRrOVpkVUZHWW0xNlVXZHhlSE0zVWxnMlRFb3phR0V6T0c1SWR6aEdhUW92T0hCdE9FMVBTazl4TlM5NWRuQnlUR0pWYjBVM1ZuSk5PR3hEV1c5TVNEaHBZblF3UjJwTk1UaHpTVk5PYldJNWMxUndVekZRYlVWRVluZElTMEpQQ214cWFGQnFhVk51YjBoWFpHRlhTVUl5Um10bmFIVnRkSGNyVlhJMEx5OTRiMlowTTNWSGVscFdaM0pPUjA5NlQxWnZTbEJQWlVZcldVRlBZbGxVYWtzS1kzSlFVMGhqY1hsQ2VqTnNlbTVNZG14blpGWTFOa2gxTWpOekszVlFhMlYyU2xsblVFUnJNbmhUV1VoYU15OUhiV3N5UXpGSFRGRjFWV053UnpaRU9BcERVVzVvTlRSUFNYVjFaMVJtZFRObVVrZEZlamhJVVdsVmRsbHpTRVZqYWpCSE1rSktjV0pPUkZKMmR6bHVLek5qYURaSmJITkpRbmw0ZEd3M1VIRlBDaTlPVWtsWWJXaHhNbmxQWmpnNGNGTjZSbWt3UVdOQ1VsUjZlSE41TjNwVWFGVkZQUW90TFMwdExVVk9SQ0JEUlZKVVNVWkpRMEZVUlMwdExTMHRDZz09CkVPRgpjaG1vZCAnMDY0NCcgJy92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzL2NhLmNydCcKCm1rZGlyIC1wICcvdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlcicKY2F0IDw8IEVPRiB8IGJhc2U2NCAtZCA+ICcvdmFyL2xpYi9jbG91ZC1jb25maWctZG93bmxvYWRlci9kb3dubG9hZC1jbG91ZC1jb25maWcuc2gnCkl5RXZZbWx1TDJKaGMyZ0tDbk5sZENBdGJ5QmxjbkpsZUdsMENuTmxkQ0F0YnlCdWIzVnVjMlYwQ25ObGRDQXRieUJ3YVhCbFptRnBiQW9LZXdwVFJVTlNSVlJmVGtGTlJUMGlZMnh2ZFdRdFkyOXVabWxuTFhkdmNtdGxjaTExYlc5a1pqUjRhaTFtTnpaaU5pSUtWRTlMUlU1ZlUwVkRVa1ZVWDA1QlRVVTlJbU5zYjNWa0xXTnZibVpwWnkxa2IzZHViRzloWkdWeUlnb0tVRUZVU0Y5RFRFOVZSRU5QVGtaSlIxOUVUMWRPVEU5QlJFVlNYME5NU1VWT1ZGOURSVkpVUFNJdmRtRnlMMnhwWWk5amJHOTFaQzFqYjI1bWFXY3RaRzkzYm14dllXUmxjaTlqY21Wa1pXNTBhV0ZzY3k5amJHbGxiblF1WTNKMElncFFRVlJJWDBOTVQxVkVRMDlPUmtsSFgwUlBWMDVNVDBGRVJWSmZRMHhKUlU1VVgwdEZXVDBpTDNaaGNpOXNhV0l2WTJ4dmRXUXRZMjl1Wm1sbkxXUnZkMjVzYjJGa1pYSXZZM0psWkdWdWRHbGhiSE12WTJ4cFpXNTBMbXRsZVNJS1VFRlVTRjlEVEU5VlJFTlBUa1pKUjE5RVQxZE9URTlCUkVWU1gxUlBTMFZPUFNJdmRtRnlMMnhwWWk5amJHOTFaQzFqYjI1bWFXY3RaRzkzYm14dllXUmxjaTlqY21Wa1pXNTBhV0ZzY3k5MGIydGxiaUlLVUVGVVNGOUNUMDlVVTFSU1FWQmZWRTlMUlU0OUlpOTJZWEl2YkdsaUwyTnNiM1ZrTFdOdmJtWnBaeTFrYjNkdWJHOWhaR1Z5TDJOeVpXUmxiblJwWVd4ekwySnZiM1J6ZEhKaGNDMTBiMnRsYmlJS1VFRlVTRjlGV0VWRFZWUlBVbDlUUTFKSlVGUTlJaTkyWVhJdmJHbGlMMk5zYjNWa0xXTnZibVpwWnkxa2IzZHViRzloWkdWeUwyUnZkMjVzYjJGa2N5OWxlR1ZqZFhSbExXTnNiM1ZrTFdOdmJtWnBaeTV6YUNJS1VFRlVTRjlGV0VWRFZWUlBVbDlUUTFKSlVGUmZRMGhGUTB0VFZVMDlJaTkyWVhJdmJHbGlMMk5zYjNWa0xXTnZibVpwWnkxa2IzZHViRzloWkdWeUwyUnZkMjVzYjJGa2N5OWxlR1ZqZFhSbExXTnNiM1ZrTFdOdmJtWnBaeTFqYUdWamEzTjFiU0lLQ20xclpHbHlJQzF3SUNJdmRtRnlMMnhwWWk5amJHOTFaQzFqYjI1bWFXY3RaRzkzYm14dllXUmxjaTlrYjNkdWJHOWhaSE1pQ2dwbWRXNWpkR2x2YmlCeVpXRmtVMlZqY21WMEtDa2dld29nSUhkblpYUWdYQW9nSUNBZ0xYRlBMU0JjQ2lBZ0lDQXRMV05oTFdObGNuUnBabWxqWVhSbElDSXZkbUZ5TDJ4cFlpOWpiRzkxWkMxamIyNW1hV2N0Wkc5M2JteHZZV1JsY2k5amNtVmtaVzUwYVdGc2N5OWpZUzVqY25RaUlGd0tJQ0FnSUNJa2UwQTZNbjBpSUNJa0tHTmhkQ0FpTDNaaGNpOXNhV0l2WTJ4dmRXUXRZMjl1Wm1sbkxXUnZkMjVzYjJGa1pYSXZZM0psWkdWdWRHbGhiSE12YzJWeWRtVnlJaWt2WVhCcEwzWXhMMjVoYldWemNHRmpaWE12YTNWaVpTMXplWE4wWlcwdmMyVmpjbVYwY3k4a01TSUtmUW9LWm5WdVkzUnBiMjRnY21WaFpGTmxZM0psZEVaMWJHd29LU0I3Q2lBZ2NtVmhaRk5sWTNKbGRDQWlKREVpSUNJdExXaGxZV1JsY2oxQlkyTmxjSFE2SUdGd2NHeHBZMkYwYVc5dUwzbGhiV3dpSUNJa2UwQTZNbjBpQ24wS0NtWjFibU4wYVc5dUlISmxZV1JUWldOeVpYUk5aWFJoS0NrZ2V3b2dJSEpsWVdSVFpXTnlaWFFnSWlReElpQWlMUzFvWldGa1pYSTlRV05qWlhCME9pQmhjSEJzYVdOaGRHbHZiaTk1WVcxc08yRnpQVkJoY25ScFlXeFBZbXBsWTNSTlpYUmhaR0YwWVR0blBXMWxkR0V1YXpoekxtbHZPM1k5ZGpFc1lYQndiR2xqWVhScGIyNHZlV0Z0YkR0aGN6MVFZWEowYVdGc1QySnFaV04wVFdWMFlXUmhkR0U3WnoxdFpYUmhMbXM0Y3k1cGJ6dDJQWFl4SWlBaUpIdEFPako5SWdwOUNncG1kVzVqZEdsdmJpQnlaV0ZrVTJWamNtVjBUV1YwWVZkcGRHaFViMnRsYmlncElIc0tJQ0J5WldGa1UyVmpjbVYwVFdWMFlTQWlKREVpSUNJdExXaGxZV1JsY2oxQmRYUm9iM0pwZW1GMGFXOXVPaUJDWldGeVpYSWdKRElpQ24wS0NtWjFibU4wYVc5dUlISmxZV1JUWldOeVpYUlhhWFJvVkc5clpXNG9LU0I3Q2lBZ2NtVmhaRk5sWTNKbGRFWjFiR3dnSWlReElpQWlMUzFvWldGa1pYSTlRWFYwYUc5eWFYcGhkR2x2YmpvZ1FtVmhjbVZ5SUNReUlncDlDZ3BtZFc1amRHbHZiaUJ5WldGa1UyVmpjbVYwVjJsMGFFTnNhV1Z1ZEVObGNuUnBabWxqWVhSbEtDa2dld29nSUhKbFlXUlRaV055WlhSR2RXeHNJQ0lrTVNJZ0lpMHRZMlZ5ZEdsbWFXTmhkR1U5SkZCQlZFaGZRMHhQVlVSRFQwNUdTVWRmUkU5WFRreFBRVVJGVWw5RFRFbEZUbFJmUTBWU1ZDSWdJaTB0Y0hKcGRtRjBaUzFyWlhrOUpGQkJWRWhmUTB4UFZVUkRUMDVHU1VkZlJFOVhUa3hQUVVSRlVsOURURWxGVGxSZlMwVlpJZ3A5Q2dwbWRXNWpkR2x2YmlCbGVIUnlZV04wUkdGMFlVdGxlVVp5YjIxVFpXTnlaWFFvS1NCN0NpQWdaV05vYnlBaUpERWlJSHdnYzJWa0lDMXliaUFpY3k4Z0lDUXlPaUFvTGlvcEwxd3hMM0FpSUh3Z1ltRnpaVFkwSUMxa0NuMEtDbVoxYm1OMGFXOXVJR1Y0ZEhKaFkzUkRhR1ZqYTNOMWJVWnliMjFUWldOeVpYUW9LU0I3Q2lBZ1pXTm9ieUFpSkRFaUlId2djMlZrSUMxeWJpQW5jeThnSUNBZ1kyaGxZMnR6ZFcxY0wyUmhkR0V0YzJOeWFYQjBPaUFvTGlvcEwxd3hMM0FuSUh3Z2MyVmtJQzFsSUNkekwxNGlMeThuSUMxbElDZHpMeUlrTHk4bkNuMEtDbVoxYm1OMGFXOXVJSGR5YVhSbFZHOUVhWE5yVTJGbVpXeDVLQ2tnZXdvZ0lHeHZZMkZzSUdSaGRHRTlJaVF4SWdvZ0lHeHZZMkZzSUdacGJHVmZjR0YwYUQwaUpESWlDZ29nSUdsbUlHVmphRzhnSWlSa1lYUmhJaUErSUNJa1ptbHNaVjl3WVhSb0xuUnRjQ0lnSmlZZ0tDQmJXeUFoSUMxbUlDSWtabWxzWlY5d1lYUm9JaUJkWFNCOGZDQWhJR1JwWm1ZZ0lpUm1hV3hsWDNCaGRHZ2lJQ0lrWm1sc1pWOXdZWFJvTG5SdGNDSStMMlJsZGk5dWRXeHNJQ2s3SUhSb1pXNEtJQ0FnSUcxMklDSWtabWxzWlY5d1lYUm9MblJ0Y0NJZ0lpUm1hV3hsWDNCaGRHZ2lDaUFnWld4cFppQmJXeUF0WmlBaUpHWnBiR1ZmY0dGMGFDNTBiWEFpSUYxZE95QjBhR1Z1Q2lBZ0lDQnliU0F0WmlBaUpHWnBiR1ZmY0dGMGFDNTBiWEFpQ2lBZ1pta0tmUW9LSXlCa2IzZHViRzloWkNCemFHOXZkQ0JoWTJObGMzTWdkRzlyWlc0Z1ptOXlJR05zYjNWa0xXTnZibVpwWnkxa2IzZHViRzloWkdWeUNtbG1JRnRiSUMxbUlDSWtVRUZVU0Y5RFRFOVZSRU5QVGtaSlIxOUVUMWRPVEU5QlJFVlNYMVJQUzBWT0lpQmRYVHNnZEdobGJnb2dJR2xtSUNFZ1UwVkRVa1ZVUFNJa0tISmxZV1JUWldOeVpYUlhhWFJvVkc5clpXNGdJaVJVVDB0RlRsOVRSVU5TUlZSZlRrRk5SU0lnSWlRb1kyRjBJQ0lrVUVGVVNGOURURTlWUkVOUFRrWkpSMTlFVDFkT1RFOUJSRVZTWDFSUFMwVk9JaWtpS1NJN0lIUm9aVzRLSUNBZ0lHVmphRzhnSWtOdmRXeGtJRzV2ZENCeVpYUnlhV1YyWlNCMGFHVWdjMmh2YjNRZ1lXTmpaWE56SUhObFkzSmxkQ0IzYVhSb0lHNWhiV1VnSkZSUFMwVk9YMU5GUTFKRlZGOU9RVTFGSUhkcGRHZ2daWGhwYzNScGJtY2dkRzlyWlc0aUNpQWdJQ0JsZUdsMElERUtJQ0JtYVFwbGJITmxDaUFnYVdZZ1cxc2dMV1lnSWlSUVFWUklYMEpQVDFSVFZGSkJVRjlVVDB0RlRpSWdYVjA3SUhSb1pXNEtJQ0FnSUdsbUlDRWdVMFZEVWtWVVBTSWtLSEpsWVdSVFpXTnlaWFJYYVhSb1ZHOXJaVzRnSWlSVVQwdEZUbDlUUlVOU1JWUmZUa0ZOUlNJZ0lpUW9ZMkYwSUNJa1VFRlVTRjlDVDA5VVUxUlNRVkJmVkU5TFJVNGlLU0lwSWpzZ2RHaGxiZ29nSUNBZ0lDQmxZMmh2SUNKRGIzVnNaQ0J1YjNRZ2NtVjBjbWxsZG1VZ2RHaGxJSE5vYjI5MElHRmpZMlZ6Y3lCelpXTnlaWFFnZDJsMGFDQnVZVzFsSUNSVVQwdEZUbDlUUlVOU1JWUmZUa0ZOUlNCM2FYUm9JR0p2YjNSemRISmhjQ0IwYjJ0bGJpSUtJQ0FnSUNBZ1pYaHBkQ0F4Q2lBZ0lDQm1hUW9nSUdWc2MyVUtJQ0FnSUdsbUlDRWdVMFZEVWtWVVBTSWtLSEpsWVdSVFpXTnlaWFJYYVhSb1EyeHBaVzUwUTJWeWRHbG1hV05oZEdVZ0lpUlVUMHRGVGw5VFJVTlNSVlJmVGtGTlJTSXBJanNnZEdobGJnb2dJQ0FnSUNCbFkyaHZJQ0pEYjNWc1pDQnViM1FnY21WMGNtbGxkbVVnZEdobElITm9iMjkwSUdGalkyVnpjeUJ6WldOeVpYUWdkMmwwYUNCdVlXMWxJQ1JVVDB0RlRsOVRSVU5TUlZSZlRrRk5SU0IzYVhSb0lHTnNhV1Z1ZENCalpYSjBhV1pwWTJGMFpTSUtJQ0FnSUNBZ1pYaHBkQ0F4Q2lBZ0lDQm1hUW9nSUdacENtWnBDZ3BVVDB0RlRqMGlKQ2hsZUhSeVlXTjBSR0YwWVV0bGVVWnliMjFUWldOeVpYUWdJaVJUUlVOU1JWUWlJQ0owYjJ0bGJpSXBJZ3BwWmlCYld5QXRlaUFpSkZSUFMwVk9JaUJkWFRzZ2RHaGxiZ29nSUdWamFHOGdJbFJ2YTJWdUlHbHVJSE5vYjI5MElHRmpZMlZ6Y3lCelpXTnlaWFFnSkZSUFMwVk9YMU5GUTFKRlZGOU9RVTFGSUdseklHVnRjSFI1SWdvZ0lHVjRhWFFnTVFwbWFRcDNjbWwwWlZSdlJHbHphMU5oWm1Wc2VTQWlKRlJQUzBWT0lpQWlKRkJCVkVoZlEweFBWVVJEVDA1R1NVZGZSRTlYVGt4UFFVUkZVbDlVVDB0RlRpSUtDaU1nWkc5M2JteHZZV1FnWVc1a0lISjFiaUIwYUdVZ1kyeHZkV1FnWTI5dVptbG5JR1Y0WldOMWRHbHZiaUJ6WTNKcGNIUUthV1lnSVNCVFJVTlNSVlJmVFVWVVFUMGlKQ2h5WldGa1UyVmpjbVYwVFdWMFlWZHBkR2hVYjJ0bGJpQWlKRk5GUTFKRlZGOU9RVTFGSWlBaUpGUlBTMFZPSWlraU95QjBhR1Z1Q2lBZ1pXTm9ieUFpUTI5MWJHUWdibTkwSUhKbGRISnBaWFpsSUhSb1pTQnRaWFJoWkdGMFlTQnBiaUJ6WldOeVpYUWdkMmwwYUNCdVlXMWxJQ1JUUlVOU1JWUmZUa0ZOUlNJS0lDQmxlR2wwSURFS1pta0tUa1ZYWDBOSVJVTkxVMVZOUFNJa0tHVjRkSEpoWTNSRGFHVmphM04xYlVaeWIyMVRaV055WlhRZ0lpUlRSVU5TUlZSZlRVVlVRU0lwSWdvS1QweEVYME5JUlVOTFUxVk5QU0k4Ym05dVpUNGlDbWxtSUZ0YklDMW1JQ0lrVUVGVVNGOUZXRVZEVlZSUFVsOVRRMUpKVUZSZlEwaEZRMHRUVlUwaUlGMWRPeUIwYUdWdUNpQWdUMHhFWDBOSVJVTkxVMVZOUFNJa0tHTmhkQ0FpSkZCQlZFaGZSVmhGUTFWVVQxSmZVME5TU1ZCVVgwTklSVU5MVTFWTklpa2lDbVpwQ2dwcFppQmJXeUFpSkU1RlYxOURTRVZEUzFOVlRTSWdJVDBnSWlSUFRFUmZRMGhGUTB0VFZVMGlJRjFkT3lCMGFHVnVDaUFnWldOb2J5QWlRMmhsWTJ0emRXMGdiMllnWTJ4dmRXUWdZMjl1Wm1sbklITmpjbWx3ZENCb1lYTWdZMmhoYm1kbFpDQmpiMjF3WVhKbFpDQjBieUIzYUdGMElFa2dhR0ZrSUdSdmQyNXNiMkZrWldRZ1pXRnliR2xsY2lBb2JtVjNPaUFrVGtWWFgwTklSVU5MVTFWTkxDQnZiR1E2SUNSUFRFUmZRMGhGUTB0VFZVMHBMaUJHWlhSamFHbHVaeUJ1WlhjZ2MyTnlhWEIwTGk0dUlnb0tJQ0JwWmlBaElGTkZRMUpGVkQwaUpDaHlaV0ZrVTJWamNtVjBWMmwwYUZSdmEyVnVJQ0lrVTBWRFVrVlVYMDVCVFVVaUlDSWtWRTlMUlU0aUtTSTdJSFJvWlc0S0lDQWdJR1ZqYUc4Z0lrTnZkV3hrSUc1dmRDQnlaWFJ5YVdWMlpTQjBhR1VnWTJ4dmRXUWdZMjl1Wm1sbklITmpjbWx3ZENCcGJpQnpaV055WlhRZ2QybDBhQ0J1WVcxbElDUlRSVU5TUlZSZlRrRk5SU0lLSUNBZ0lHVjRhWFFnTVFvZ0lHWnBDZ29nSUZORFVrbFFWRDBpSkNobGVIUnlZV04wUkdGMFlVdGxlVVp5YjIxVFpXTnlaWFFnSWlSVFJVTlNSVlFpSUNKelkzSnBjSFFpS1NJS0lDQnBaaUJiV3lBdGVpQWlKRk5EVWtsUVZDSWdYVjA3SUhSb1pXNEtJQ0FnSUdWamFHOGdJbE5qY21sd2RDQnBiaUJqYkc5MVpDQmpiMjVtYVdjZ2MyVmpjbVYwSUNSVFJVTlNSVlFnYVhNZ1pXMXdkSGtpQ2lBZ0lDQmxlR2wwSURFS0lDQm1hUW9LSUNCM2NtbDBaVlJ2UkdsemExTmhabVZzZVNBaUpGTkRVa2xRVkNJZ0lpUlFRVlJJWDBWWVJVTlZWRTlTWDFORFVrbFFWQ0lnSmlZZ1kyaHRiMlFnSzNnZ0lpUlFRVlJJWDBWWVJVTlZWRTlTWDFORFVrbFFWQ0lLSUNCM2NtbDBaVlJ2UkdsemExTmhabVZzZVNBaUpDaGxlSFJ5WVdOMFEyaGxZMnR6ZFcxR2NtOXRVMlZqY21WMElDSWtVMFZEVWtWVUlpa2lJQ0lrVUVGVVNGOUZXRVZEVlZSUFVsOVRRMUpKVUZSZlEwaEZRMHRUVlUwaUNtWnBDZ29pSkZCQlZFaGZSVmhGUTFWVVQxSmZVME5TU1ZCVUlncGxlR2wwSUNRL0NuMEsKRU9GCmNobW9kICcwNzQ0JyAnL3Zhci9saWIvY2xvdWQtY29uZmlnLWRvd25sb2FkZXIvZG93bmxvYWQtY2xvdWQtY29uZmlnLnNoJwoKbWtkaXIgLXAgJy92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzJwpjYXQgPDwgRU9GID4gJy92YXIvbGliL2Nsb3VkLWNvbmZpZy1kb3dubG9hZGVyL2NyZWRlbnRpYWxzL2Jvb3RzdHJhcC10b2tlbicKNzg2NDM5LjFkejd3NXQ3Y3Jib3Q3amQKRU9GCmNobW9kICcwNjQ0JyAnL3Zhci9saWIvY2xvdWQtY29uZmlnLWRvd25sb2FkZXIvY3JlZGVudGlhbHMvYm9vdHN0cmFwLXRva2VuJwoKCgpjYXQgPDwgRU9GIHwgYmFzZTY0IC1kID4gJy9ldGMvc3lzdGVtZC9zeXN0ZW0vY2xvdWQtY29uZmlnLWRvd25sb2FkZXIuc2VydmljZScKVzFWdWFYUmRDa1JsYzJOeWFYQjBhVzl1UFVSdmQyNXNiMkZrY3lCMGFHVWdZV04wZFdGc0lHTnNiM1ZrSUdOdmJtWnBaeUJtY205dElIUm9aU0JUYUc5dmRDQkJVRWtnYzJWeWRtVnlJR0Z1WkNCbGVHVmpkWFJsY3lCcGRBcEJablJsY2oxa2IyTnJaWEl1YzJWeWRtbGpaU0JrYjJOclpYSXVjMjlqYTJWMENsZGhiblJ6UFdSdlkydGxjaTV6YjJOclpYUUtXMU5sY25acFkyVmRDbEpsYzNSaGNuUTlZV3gzWVhsekNsSmxjM1JoY25SVFpXTTlNekFLVW5WdWRHbHRaVTFoZUZObFl6MHhNakF3Q2tWdWRtbHliMjV0Wlc1MFJtbHNaVDB2WlhSakwyVnVkbWx5YjI1dFpXNTBDa1Y0WldOVGRHRnlkRDB2ZG1GeUwyeHBZaTlqYkc5MVpDMWpiMjVtYVdjdFpHOTNibXh2WVdSbGNpOWtiM2R1Ykc5aFpDMWpiRzkxWkMxamIyNW1hV2N1YzJnS1cwbHVjM1JoYkd4ZENsZGhiblJsWkVKNVBXMTFiSFJwTFhWelpYSXVkR0Z5WjJWMApFT0YKCnVudGlsIGFwdC1nZXQgdXBkYXRlIC1xcSAmJiBhcHQtZ2V0IGluc3RhbGwgLS1uby11cGdyYWRlIC1xcXkgY29udGFpbmVyZCBydW5jIGRvY2tlci5pbyBzb2NhdCBuZnMtY29tbW9uIGxvZ3JvdGF0ZSBqcSBwb2xpY3lraXQtMTsgZG8gc2xlZXAgMTsgZG9uZQpsbiAtcyAvdXNyL2Jpbi9kb2NrZXIgL2Jpbi9kb2NrZXIKaWYgWyAhIC1zIC9ldGMvY29udGFpbmVyZC9jb25maWcudG9tbCBdOyB0aGVuCiAgbWtkaXIgLXAgL2V0Yy9jb250YWluZXJkLwogIGNvbnRhaW5lcmQgY29uZmlnIGRlZmF1bHQgPiAvZXRjL2NvbnRhaW5lcmQvY29uZmlnLnRvbWwKICBjaG1vZCAwNjQ0IC9ldGMvY29udGFpbmVyZC9jb25maWcudG9tbApmaQoKbWtkaXIgLXAgL2V0Yy9zeXN0ZW1kL3N5c3RlbS9jb250YWluZXJkLnNlcnZpY2UuZApjYXQgPDxFT0YgPiAvZXRjL3N5c3RlbWQvc3lzdGVtL2NvbnRhaW5lcmQuc2VydmljZS5kLzExLWV4ZWNfY29uZmlnLmNvbmYKW1NlcnZpY2VdCkV4ZWNTdGFydD0KRXhlY1N0YXJ0PS91c3IvYmluL2NvbnRhaW5lcmQgLS1jb25maWc9L2V0Yy9jb250YWluZXJkL2NvbmZpZy50b21sCkVPRgpjaG1vZCAwNjQ0IC9ldGMvc3lzdGVtZC9zeXN0ZW0vY29udGFpbmVyZC5zZXJ2aWNlLmQvMTEtZXhlY19jb25maWcuY29uZgoKc3lzdGVtY3RsIGRhZW1vbi1yZWxvYWQKc3lzdGVtY3RsIGVuYWJsZSBjb250YWluZXJkICYmIHN5c3RlbWN0bCByZXN0YXJ0IGNvbnRhaW5lcmQKc3lzdGVtY3RsIGVuYWJsZSBkb2NrZXIgJiYgc3lzdGVtY3RsIHJlc3RhcnQgZG9ja2VyCnN5c3RlbWN0bCBlbmFibGUgY2xvdWQtY29uZmlnLWRvd25sb2FkZXIgJiYgc3lzdGVtY3RsIHJlc3RhcnQgY2xvdWQtY29uZmlnLWRvd25sb2FkZXIKcm0gLXJmIC9yb290Ly5iYXNoX2hpc3RvcnkKaGlzdG9yeSAtYw=="
	writeFile := fmt.Sprintf("write_files:\n  - path: /root/custom_network_config.sh\n    permissions: '0755'\n    encoding: b64\n    content: %s", secret)
	runcmd := fmt.Sprintf("runcmd:\n  - sed -i \"s|^\"/swapfile\"|#&|\"\n  - sudo swapoff -a\n  - hostnamectl set-hostname %s\n  - systemctl restart systemd-hostnamed.service\n  - /bin/bash /root/custom_network_config.sh", machineName)
	setUser := "user: xplat\npassword: sondx\nchpasswd: {expire: False}\nssh_pwauth: True"
	userData := fmt.Sprintf("#cloud-config\n%s\n%s\n%s", setUser, writeFile, runcmd)
	PublicKey := sshkey{
		Id:         "aaaa-bbbb-cccc-dddd",
		Name:       "fke-pass",
		Public_key: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCjPnuMpUNzG5cztSjEFTC29SHU9RDJ/QKDlpfbtOsl6D/9sIdVoH1QaC98d6IUnumogfQvPqP38dvvau7lkHpp6+stfGsfLBm6HpUHeNTD11YdIddUJOZpnkFghOc2TIpTTnFvw4FYEPDGE0zHqsmhcWLPHfjyG9FJTd4pUinE6/V9BGQ/9O4zZTo+XNajoolewNK6giTWk1L86/SNoFVE9leZs2g85EYOztuP+U0t8kSoMVxXJygi2WuuAonQxNIIMn2WbaGevLISu93kACQelO+lYDAW2T4NEL2l26CYgQGOUGUq/9bU/6EG4WL7u7kd9b6T5sGaNvvS8M0wth9f",
	}
	jsonDataKey, err := json.Marshal(PublicKey)
	if err != nil {
		fmt.Printf("error: [%v]", err)
	}
	Distro := distro{
		Name: "mfke-v127ncp-dev",
		// Hwe_kernel: "ga-22.04",
	}

	jsonDataDistro, err := json.Marshal(Distro)
	if err != nil {
		fmt.Printf("error: [%v]", err)
	}
	fmt.Printf("sshKey: %s\n", string(jsonDataKey))
	fmt.Printf("Distro: %s\n", string(jsonDataDistro))
	reqCreate := requestBodyCreate{
		RegionId:   "hanoi-vn",
		Names:      []string{"sondx12"},
		RaidType:   "",
		ServerType: serverType,
		OS:         "custom",
		SshKey:     string(jsonDataKey),
		Distro:     string(jsonDataDistro),
		ClusterId:  2,
		UserData:   userData,
	}

	err = CreateMachine(server, vpcId, bearerToken, reqCreate)
	if err != nil {
		fmt.Printf("error when get detail server in vpc: [%v]", err)
	}

	// err := GetMachine(server, vpcId, bearerToken, "665a5173-a48c-42ee-9415-788725a581a7")
	// if err != nil {
	// 	fmt.Printf("error when get detail server in vpc: [%v]", err)
	// }

	// err = DeleteMachine(server, vpcId, bearerToken, "c32aaad1-91c5-4c88-b780-f357cb9be90d")
	// if err != nil {
	// 	fmt.Printf("error when delete server in vpc: [%v]", err)
	// }
	// err = PowerOffServer(server, vpcId, bearerToken, "3e935fca-9082-45b0-9da2-ce9b01af40ab")
	// if err != nil {
	// 	fmt.Printf("error when power off server in vpc: [%v]", err)
	// }
	// err := ListServer(server, vpcId, bearerToken)
	// if err != nil {
	// 	fmt.Printf("error when get detail server in vpc: [%v]", err)
	// }
}

// Create a machine with user's predefination
func CreateMachine(server, vpcId, bearerToken string, reqCreate requestBodyCreate) error {
	portalServer := "https://" + server + "/api/v1/vmware/vpc/" + vpcId + "/hpc/server/create"
	bearer := "Bearer " + bearerToken
	tr := &http.Transport{
		TLSClientConfig: &tls.Config{InsecureSkipVerify: true},
	}
	createBody, _ := json.Marshal(reqCreate)
	reqBody := bytes.NewBuffer(createBody)
	clienthttp := &http.Client{Transport: tr}
	req, _ := http.NewRequest("POST", portalServer, reqBody)
	req.Header.Add("Authorization", bearer)
	req.Header.Set("Content-Type", "application/json")
	req.Header.Add("accept", "application/json, text/plain, */*")
	req.Header.Set("Accept-Encoding", "gzip, deflate, br")
	resp, err := clienthttp.Do(req)
	if err != nil {
		return fmt.Errorf("unable to perform POST request : [%v]", err)
	}
	body, err := io.ReadAll(resp.Body)
	if err != nil {
		return fmt.Errorf("unable to read response body of GET placement policy request: [%v]", err)
	}
	if resp.StatusCode == 202 {
		var result responseBodyCreateAccepted
		json.Unmarshal(body, &result)
		fmt.Printf("Data: %s\n", result.Data)
		fmt.Printf("Error: %s\n", result.Error)
		return nil
	}
	var result responseBodyCreateError
	json.Unmarshal(body, &result)
	fmt.Printf("Error: %v\n", resp.StatusCode)
	fmt.Printf("Message: %s\n", string(body))
	return fmt.Errorf("error to create machine: [%v]", result.Error)
}

// PowerOff server BM
func PowerOffServer(server, vpcId, bearerToken, systemId string) error {
	portalServer := "https://" + server + "/api/v1/vmware/vpc/" + vpcId + "/hpc/server/" + systemId + "/powered-off"
	bearer := "Bearer " + bearerToken
	tr := &http.Transport{
		TLSClientConfig: &tls.Config{InsecureSkipVerify: true},
	}
	// putBody, _ := json.Marshal(reqPut)
	// reqBody := bytes.NewBuffer(putBody)
	clienthttp := &http.Client{Transport: tr}
	req, _ := http.NewRequest("POST", portalServer, nil)
	req.Header.Add("Authorization", bearer)
	req.Header.Set("Content-Type", "application/json")
	resp, err := clienthttp.Do(req)
	if err != nil {
		return fmt.Errorf("unable to perform POST request : [%v]", err)
	}
	body, err := io.ReadAll(resp.Body)
	if err != nil {
		return fmt.Errorf("unable to read response body of POST to poweroff a server state: [%v]", err)
	}
	var result responseBodyCreateAccepted
	json.Unmarshal(body, &result)
	if resp.StatusCode == 202 {
		fmt.Printf("data: %s\n", result.Data)
		fmt.Printf("message: %s\n", result.Error)
		return nil
	}
	fmt.Printf("data: %s\n", result.Data)
	// fmt.Printf("message: %s\n", result.Error)
	return fmt.Errorf("error to update machine: [%v]", result.Error)
}

// PowerOff server BM
func PowerOnServer(server, vpcId, bearerToken, systemId string) error {
	portalServer := "https://" + server + "/api/v1/vmware/vpc/" + vpcId + "/hpc/server/" + systemId + "/powered-on"
	bearer := "Bearer " + bearerToken
	tr := &http.Transport{
		TLSClientConfig: &tls.Config{InsecureSkipVerify: true},
	}
	clienthttp := &http.Client{Transport: tr}
	req, _ := http.NewRequest("POST", portalServer, nil)
	req.Header.Add("Authorization", bearer)
	req.Header.Set("Content-Type", "application/json")
	resp, err := clienthttp.Do(req)
	if err != nil {
		return fmt.Errorf("unable to perform POST request : [%v]", err)
	}
	body, err := io.ReadAll(resp.Body)
	if err != nil {
		return fmt.Errorf("unable to read response body of POST to poweron a server state: [%v]", err)
	}
	var result responseBodyCreateAccepted
	json.Unmarshal(body, &result)
	if resp.StatusCode == 202 {
		fmt.Printf("data: %s\n", result.Data)
		fmt.Printf("message: %s\n", result.Error)
		return nil
	}
	fmt.Printf("data: %s\n", result.Data)
	// fmt.Printf("message: %s\n", result.Error)
	return fmt.Errorf("error to update machine: [%v]", result.Error)
}

// Get machine detail with machine ID
func GetMachine(server, vpcId, bearerToken, systemId string) error {
	portalServer := "https://" + server + "/api/v1/vmware/vpc/" + vpcId + "/hpc/server/" + systemId + "/detail"
	bearer := "Bearer " + bearerToken
	tr := &http.Transport{
		TLSClientConfig: &tls.Config{InsecureSkipVerify: true},
	}
	clienthttp := &http.Client{Transport: tr}
	req, _ := http.NewRequest("GET", portalServer, nil)
	req.Header.Add("Authorization", bearer)
	req.Header.Set("Content-Type", "application/json")
	resp, err := clienthttp.Do(req)
	if err != nil {
		return fmt.Errorf("unable to perform GET request : [%v]", err)
	}
	body, err := io.ReadAll(resp.Body)
	if err != nil {
		return fmt.Errorf("unable to read response body of GET machine detail request : [%v]", err)
	}
	var result responseBodyDetail
	json.Unmarshal(body, &result)
	result.Code = resp.StatusCode
	if resp.StatusCode == 200 {
		fmt.Printf("Error: %s\n", result.Message)
		fmt.Printf("data: %v\n", result.Data)
		return nil
	}
	fmt.Printf("Error: %s\n", result.Message)
	fmt.Printf("Error: %d\n", result.Code)
	return fmt.Errorf("error to GET machine: [%v]", result.Message)
}

// Release a machine with machine ID
func DeleteMachine(server, vpcId, bearerToken, systemId string) error {
	portalServer := "https://" + server + "/api/v1/vmware/vpc/" + vpcId + "/hpc/server/" + systemId + "/delete"
	bearer := "Bearer " + bearerToken
	tr := &http.Transport{
		TLSClientConfig: &tls.Config{InsecureSkipVerify: true},
	}
	clienthttp := &http.Client{Transport: tr}
	req, _ := http.NewRequest("DELETE", portalServer, nil)
	req.Header.Add("Authorization", bearer)
	req.Header.Set("Content-Type", "application/json")
	resp, err := clienthttp.Do(req)
	if err != nil {
		return fmt.Errorf("unable to perform DELETE request : [%v]", err)
	}
	body, err := io.ReadAll(resp.Body)
	if err != nil {
		return fmt.Errorf("unable to read response body of DELETE machine request : [%v]", err)
	}
	var result responseBodyDelete
	json.Unmarshal(body, &result)
	if resp.StatusCode == 202 {
		fmt.Printf("Message: %s\n", result.Message)
		fmt.Printf("Data: %v\n", result.Data)
		return nil
	}
	fmt.Printf("Error: %s\n", result.Message)
	// fmt.Printf("IsSuccess: %t\n", result.IsSuccess)
	return fmt.Errorf("error to DELETE machine: [%v]", result.Message)
}

// List all server in VPC
func ListServer(server, vpcID, bearerToken string) error {
	portalServer := "https://" + server + "/api/v1/vmware/vpc/" + vpcID + "/hpc/server/list"
	bearer := "Bearer " + bearerToken
	tr := &http.Transport{
		TLSClientConfig: &tls.Config{InsecureSkipVerify: true},
	}
	clienthttp := &http.Client{Transport: tr}
	req, _ := http.NewRequest("GET", portalServer, nil)
	req.Header.Add("Authorization", bearer)
	req.Header.Set("Content-Type", "application/json")
	resp, err := clienthttp.Do(req)
	if err != nil {
		return fmt.Errorf("unable to perform GET request : [%v]", err)
	}
	body, err := io.ReadAll(resp.Body)
	if err != nil {
		return fmt.Errorf("unable to read response body of list machine detail request : [%v]", err)
	}
	var result responseBodyList
	json.Unmarshal(body, &result)
	if resp.StatusCode == 200 {
		if result.Total > 0 {
			fmt.Printf("IsSuccess: %t\n", result.IsSuccess)
			fmt.Printf("Error: %s\n", result.Error)
			fmt.Printf("body: %v\n", result.Data[0])
		} else {
			fmt.Printf("No server found in vpc")
		}
		return nil
	}
	fmt.Printf("Error: %s\n", result.Error)
	fmt.Printf("IsSuccess: %t\n", result.IsSuccess)
	return fmt.Errorf("error to list machine: [%v]", result.Error)
}
